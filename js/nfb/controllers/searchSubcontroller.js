accedo.define("nfb.controllers.searchSubcontroller",["accedo.utils.object","accedo.ui.controller","nfb.views.searchSubview","nfb.controllers.mostviewedSubcontroller"],function(){return function(a){var b;var c;return accedo.utils.object.extend(accedo.ui.controller(a),{onCreate:function(f){var d=this;d.setView(nfb.views.searchSubview);var e=[];accedo.app.getCurrentController().get("loading_subcontroller").root.setStyle({display:"block"});var h=d.get("search_ok");b=[d.get("k30"),d.get("k31"),d.get("k32"),"",d.get("k38"),d.get("k39"),d.get("k0"),d.get("k1"),d.get("k2"),d.get("k3"),d.get("k4"),d.get("k5"),d.get("k6"),d.get("k7"),d.get("k8"),d.get("k9")];c=[d.get("k0"),d.get("k1"),d.get("k2"),d.get("k3"),d.get("k4"),d.get("k5"),d.get("k6"),d.get("k7"),d.get("k8"),d.get("k9"),d.get("k10"),d.get("k11"),d.get("k12"),d.get("k13"),d.get("k14"),d.get("k15"),d.get("k16"),d.get("k17"),d.get("k18"),d.get("k19"),d.get("k20"),d.get("k21"),d.get("k22"),d.get("k23"),d.get("k24"),d.get("k25"),d.get("k26"),d.get("k27"),d.get("k28"),d.get("k29"),d.get("k30"),d.get("k31"),d.get("k32"),d.get("k33"),d.get("k34"),d.get("k35"),d.get("k36"),d.get("k37"),d.get("k38"),d.get("k39"),d.get("ak0"),d.get("ak1"),d.get("ak2"),d.get("ak3"),d.get("ak4"),d.get("ck0"),d.get("ck1"),d.get("ck2"),d.get("ek0"),d.get("ek1"),d.get("ek2"),d.get("ek3"),d.get("ek4"),d.get("ek5"),d.get("ik0"),d.get("ik1"),d.get("ik2"),d.get("ik3"),d.get("ok0"),d.get("ok1"),d.get("ok2"),d.get("ok3"),d.get("uk0"),d.get("uk1"),d.get("uk2"),d.get("uk3"),d.get("uk4"),d.get("lank0"),d.get("lank1"),d.get("lank2")];var j=this.get("search_all");var g=this.get("search_en");var i=this.get("search_fr");c[0].onFocus=function(){accedo.device.manager.unregisterKey("up");accedo.device.manager.unregisterKey("down");};if(localStorage.getItem("zlang")=="fr"){h.setText("Rechercher");}else{h.setText("GO");}if(nfb.config.usingmouse==true){d.get("k0").blur();}else{accedo.focus.manager.requestFocus(d.get("k0"));}nfb.config.search_lang="";d.get("k23").onFocus=function(){d.get("k23").setOption("nextDown","search_ok");h.setOption("nextUp","k23");};d.get("k24").onFocus=function(){d.get("k24").setOption("nextDown","search_ok");h.setOption("nextUp","k24");};d.get("k25").onFocus=function(){d.get("k25").setOption("nextDown","search_ok");h.setOption("nextUp","k25");};d.get("k16").onFocus=function(){d.get("k16").setOption("nextDown","search_ok");h.setOption("nextUp","k16");};d.get("k17").onFocus=function(){d.get("k17").setOption("nextDown","search_ok");h.setOption("nextUp","k17");};b[0].onFocus=function(){b[0].setOption("nextDown","search_ok");h.setOption("nextUp","k30");};b[1].onFocus=function(){b[1].setOption("nextDown","search_ok");h.setOption("nextUp","k31");};b[2].onFocus=function(){b[2].setOption("nextDown","search_ok");h.setOption("nextUp","k32");};b[4].onFocus=function(){b[4].setOption("nextDown","search_ok");h.setOption("nextUp","k38");};b[5].onFocus=function(){b[5].setOption("nextDown","search_ok");h.setOption("nextUp","k39");};b[6].onFocus=function(){switch(nfb.config.search_lang){case"en":b[6].setOption("nextUp","search_en");break;case"fr":b[6].setOption("nextUp","search_fr");break;default:b[6].setOption("nextUp","search_all");break;}g.setOption("nextDown","k0");i.setOption("nextDown","k0");j.setOption("nextDown","k0");};b[7].onFocus=function(){switch(nfb.config.search_lang){case"en":b[7].setOption("nextUp","search_en");break;case"fr":b[7].setOption("nextUp","search_fr");break;default:b[7].setOption("nextUp","search_all");break;}g.setOption("nextDown","k1");i.setOption("nextDown","k1");j.setOption("nextDown","k1");};b[8].onFocus=function(){switch(nfb.config.search_lang){case"en":b[8].setOption("nextUp","search_en");break;case"fr":b[8].setOption("nextUp","search_fr");break;default:b[8].setOption("nextUp","search_all");break;}g.setOption("nextDown","k2");i.setOption("nextDown","k2");j.setOption("nextDown","k2");};b[9].onFocus=function(){switch(nfb.config.search_lang){case"en":b[9].setOption("nextUp","search_en");break;case"fr":b[9].setOption("nextUp","search_fr");break;default:b[9].setOption("nextUp","search_all");break;}g.setOption("nextDown","k3");i.setOption("nextDown","k3");j.setOption("nextDown","k3");};b[10].onFocus=function(){switch(nfb.config.search_lang){case"en":b[10].setOption("nextUp","search_en");break;case"fr":b[10].setOption("nextUp","search_fr");break;default:b[10].setOption("nextUp","search_all");break;}g.setOption("nextDown","k4");i.setOption("nextDown","k4");j.setOption("nextDown","k4");};b[11].onFocus=function(){switch(nfb.config.search_lang){case"en":b[11].setOption("nextUp","search_en");break;case"fr":b[11].setOption("nextUp","search_fr");break;default:b[11].setOption("nextUp","search_all");break;}g.setOption("nextDown","k5");i.setOption("nextDown","k5");j.setOption("nextDown","k5");};b[12].onFocus=function(){switch(nfb.config.search_lang){case"en":b[12].setOption("nextUp","search_en");break;case"fr":b[12].setOption("nextUp","search_fr");break;default:b[12].setOption("nextUp","search_all");break;}g.setOption("nextDown","k6");i.setOption("nextDown","k6");j.setOption("nextDown","k6");};b[13].onFocus=function(){switch(nfb.config.search_lang){case"en":b[13].setOption("nextUp","search_en");break;case"fr":b[13].setOption("nextUp","search_fr");break;default:b[13].setOption("nextUp","search_all");break;}g.setOption("nextDown","k7");i.setOption("nextDown","k7");j.setOption("nextDown","k7");};b[14].onFocus=function(){switch(nfb.config.search_lang){case"en":b[14].setOption("nextUp","search_en");break;case"fr":b[14].setOption("nextUp","search_fr");break;default:b[14].setOption("nextUp","search_all");break;}g.setOption("nextDown","k8");i.setOption("nextDown","k8");j.setOption("nextDown","k8");};b[15].onFocus=function(){switch(nfb.config.search_lang){case"en":b[15].setOption("nextUp","search_en");break;case"fr":b[15].setOption("nextUp","search_fr");break;default:b[15].setOption("nextUp","search_all");break;}g.setOption("nextDown","k9");i.setOption("nextDown","k9");j.setOption("nextDown","k9");};h.addEventListener("click",function(){var n=accedo.app.getCurrentController().get("subcontroller").getInstance().get("vKeyboardSubcontroller").getInstance().getInput();if(n==null||n.trim()==null||n.trim()==""||n==""||n.length==0){var m;if(localStorage.getItem("zlang")=="fr"){m="Veuillez remplir le champ de recherche.";}else{m="Please enter the search string.";}var q=new nfb.ui.container({id:"block",htmlid:"block"});var l=new nfb.ui.container({id:"pop",htmlid:"pop"});var p=new accedo.ui.label({id:"pop_msg",htmlid:"pop_msg",text:m});var o=new nfb.ui.button({id:"pop_ok",htmlid:"pop_ok",text:"ok",nextLeft:"",nextRight:"",nextDown:"back",nextUp:""});accedo.app.getCurrentController().get("searchSubview").append(q);accedo.app.getCurrentController().get("block").root.getHTMLElement().setAttribute("style","background-color:white;opacity:0.7");accedo.app.getCurrentController().get("searchSubview").append(l);accedo.app.getCurrentController().get("pop").append(p);accedo.app.getCurrentController().get("pop").append(o);accedo.app.getCurrentController().get("lg_lang").setOption("nextUp","pop_ok");accedo.app.getCurrentController().get("back").setOption("nextUp","pop_ok");accedo.app.getCurrentController().get("exit").setOption("nextUp","pop_ok");accedo.focus.manager.getCurrentFocus().blur();if(nfb.config.usingmouse==false){accedo.utils.fn.defer(function(){accedo.focus.manager.requestFocus(accedo.app.getCurrentController().get("pop_ok"));});}else{accedo.focus.manager.requestFocus(accedo.app.getCurrentController().get("pop_ok"));accedo.focus.manager.getCurrentFocus().blur();}o.addEventListener("click",function(){accedo.app.getCurrentController().get("searchSubview").remove(l);accedo.app.getCurrentController().get("searchSubview").remove(q);if(nfb.config.usingmouse==false){accedo.utils.fn.defer(function(){accedo.focus.manager.requestFocus(accedo.app.getCurrentController().get("k0"));});}accedo.app.getCurrentController().get("lg_lang").setOption("nextUp","cat7");accedo.app.getCurrentController().get("exit").setOption("nextUp","cat7");accedo.app.getCurrentController().get("back").setOption("nextUp","cat7");});o.root.addEventListener("mouseout",function(){o.blur();});}else{nfb.config.search=n;nfb.config.history.push(5);nfb.config.search_start_id.push(0);nfb.config.search_focus_id.push(0);nfb.config.currentSubcontroller=10;accedo.app.getCurrentController().get("subcontroller").changeToController(nfb.controllers.mostviewedSubcontroller);if(!nfb.config.usingmouse){accedo.utils.fn.delay(function(){accedo.focus.manager.requestFocus(accedo.app.getCurrentController().get("list1"));},0.01);}else{accedo.utils.fn.delay(function(){accedo.focus.manager.requestFocus(accedo.app.getCurrentController().get("list1"));accedo.focus.manager.getCurrentFocus().blur();},0.01);}}});j.onFocus=function(){if(nfb.config.search_lang!="fr"&&nfb.config.search_lang!="en"){j.setSrc("image/checked_focused.png");}else{j.setSrc("image/circle_focused.png");}};j.onBlur=function(){if(nfb.config.search_lang!="fr"&&nfb.config.search_lang!="en"){j.setSrc("image/checked.png");}else{j.setSrc("image/circle.png");}};g.onFocus=function(){if(nfb.config.search_lang=="en"){g.setSrc("image/checked_focused.png");}else{g.setSrc("image/circle_focused.png");}};i.onFocus=function(){if(nfb.config.search_lang=="fr"){i.setSrc("image/checked_focused.png");}else{i.setSrc("image/circle_focused.png");}};g.onBlur=function(){if(nfb.config.search_lang=="en"){g.setSrc("image/checked.png");}else{g.setSrc("image/circle.png");}};i.onBlur=function(){if(nfb.config.search_lang=="fr"){i.setSrc("image/checked.png");}else{i.setSrc("image/circle.png");}};j.addEventListener("click",function(){i.setSrc("image/circle.png");g.setSrc("image/circle.png");j.setSrc("image/checked_focused.png");nfb.config.search_lang="";});j.root.addEventListener("click",function(){i.setSrc("image/circle.png");g.setSrc("image/circle.png");j.setSrc("image/checked_focused.png");nfb.config.search_lang="";});g.root.addEventListener("click",function(){i.setSrc("image/circle.png");j.setSrc("image/circle.png");g.setSrc("image/checked_focused.png");nfb.config.search_lang="en";});g.addEventListener("click",function(){i.setSrc("image/circle.png");j.setSrc("image/circle.png");g.setSrc("image/checked_focused.png");nfb.config.search_lang="en";});i.root.addEventListener("click",function(){g.setSrc("image/circle.png");j.setSrc("image/circle.png");i.setSrc("image/checked_focused.png");nfb.config.search_lang="fr";});i.addEventListener("click",function(){g.setSrc("image/circle.png");j.setSrc("image/circle.png");i.setSrc("image/checked_focused.png");nfb.config.search_lang="fr";});j.root.addEventListener("mouseout",function(){j.blur();});i.root.addEventListener("mouseout",function(){i.blur();});g.root.addEventListener("mouseout",function(){g.blur();});h.root.addEventListener("mouseout",function(){h.blur();});c[0].root.addEventListener("mouseout",function(){c[0].blur();});c[1].root.addEventListener("mouseout",function(){c[1].blur();});c[2].root.addEventListener("mouseout",function(){c[2].blur();});c[3].root.addEventListener("mouseout",function(){c[3].blur();});c[4].root.addEventListener("mouseout",function(){c[4].blur();});c[5].root.addEventListener("mouseout",function(){c[5].blur();});c[6].root.addEventListener("mouseout",function(){c[6].blur();});c[7].root.addEventListener("mouseout",function(){c[7].blur();});c[8].root.addEventListener("mouseout",function(){c[8].blur();});c[9].root.addEventListener("mouseout",function(){c[9].blur();});c[10].root.addEventListener("mouseout",function(){c[10].blur();});c[11].root.addEventListener("mouseout",function(){c[11].blur();});c[12].root.addEventListener("mouseout",function(){c[12].blur();});c[13].root.addEventListener("mouseout",function(){c[13].blur();});c[14].root.addEventListener("mouseout",function(){c[14].blur();});c[15].root.addEventListener("mouseout",function(){c[15].blur();});c[16].root.addEventListener("mouseout",function(){c[16].blur();});c[17].root.addEventListener("mouseout",function(){c[17].blur();});c[18].root.addEventListener("mouseout",function(){c[18].blur();});c[19].root.addEventListener("mouseout",function(){c[19].blur();});c[20].root.addEventListener("mouseout",function(){c[20].blur();});c[21].root.addEventListener("mouseout",function(){c[21].blur();});c[22].root.addEventListener("mouseout",function(){c[22].blur();});c[23].root.addEventListener("mouseout",function(){c[23].blur();});c[24].root.addEventListener("mouseout",function(){c[24].blur();});c[25].root.addEventListener("mouseout",function(){c[25].blur();});c[26].root.addEventListener("mouseout",function(){c[26].blur();});c[27].root.addEventListener("mouseout",function(){c[27].blur();});c[28].root.addEventListener("mouseout",function(){c[28].blur();});c[29].root.addEventListener("mouseout",function(){c[29].blur();});c[30].root.addEventListener("mouseout",function(){c[30].blur();});c[31].root.addEventListener("mouseout",function(){c[31].blur();});c[32].root.addEventListener("mouseout",function(){c[32].blur();});c[33].root.addEventListener("mouseout",function(){c[33].blur();});c[34].root.addEventListener("mouseout",function(){c[34].blur();});c[35].root.addEventListener("mouseout",function(){c[35].blur();});c[36].root.addEventListener("mouseout",function(){c[36].blur();});c[37].root.addEventListener("mouseout",function(){c[37].blur();});c[38].root.addEventListener("mouseout",function(){c[38].blur();});c[39].root.addEventListener("mouseout",function(){c[39].blur();});c[40].root.addEventListener("mouseout",function(){c[40].blur();});c[41].root.addEventListener("mouseout",function(){c[41].blur();});c[42].root.addEventListener("mouseout",function(){c[42].blur();});c[43].root.addEventListener("mouseout",function(){c[43].blur();});c[44].root.addEventListener("mouseout",function(){c[44].blur();});c[45].root.addEventListener("mouseout",function(){c[45].blur();});c[46].root.addEventListener("mouseout",function(){c[46].blur();});c[47].root.addEventListener("mouseout",function(){c[47].blur();});c[48].root.addEventListener("mouseout",function(){c[48].blur();});c[49].root.addEventListener("mouseout",function(){c[49].blur();});c[50].root.addEventListener("mouseout",function(){c[50].blur();});c[51].root.addEventListener("mouseout",function(){c[51].blur();});c[52].root.addEventListener("mouseout",function(){c[52].blur();});c[53].root.addEventListener("mouseout",function(){c[53].blur();});c[54].root.addEventListener("mouseout",function(){c[54].blur();});c[55].root.addEventListener("mouseout",function(){c[55].blur();});c[56].root.addEventListener("mouseout",function(){c[56].blur();});c[57].root.addEventListener("mouseout",function(){c[57].blur();});c[58].root.addEventListener("mouseout",function(){c[58].blur();});c[59].root.addEventListener("mouseout",function(){c[59].blur();});c[60].root.addEventListener("mouseout",function(){c[60].blur();});c[61].root.addEventListener("mouseout",function(){c[61].blur();});c[62].root.addEventListener("mouseout",function(){c[62].blur();});c[63].root.addEventListener("mouseout",function(){c[63].blur();});c[64].root.addEventListener("mouseout",function(){c[64].blur();});c[65].root.addEventListener("mouseout",function(){c[65].blur();});c[66].root.addEventListener("mouseout",function(){c[66].blur();});c[67].root.addEventListener("mouseout",function(){c[67].blur();});c[68].root.addEventListener("mouseout",function(){c[68].blur();});c[69].root.addEventListener("mouseout",function(){c[69].blur();});for(var k=0;k<17;k++){e[k]=new Image();}e[0].src="image/keybd/keybd_12;)_focus.png";e[1].src="image/keybd/keybd_abc_focus.png";e[2].src="image/keybd/keybd_back_focus.png";e[3].src="image/keybd/keybd_back_default.png";e[4].src="image/keybd/keybd_focus.png";e[5].src="image/keybd/keybd_en_default.png";e[6].src="image/keybd/keybd_en_focus.png";e[7].src="image/keybd/keybd_fr_default.png";e[8].src="image/keybd/keybd_fr_focus.png";e[9].src="image/keybd/keybd_inactive.png";e[10].src="image/keybd/keybd_left_focus.png";e[11].src="image/keybd/keybd_right_focus.png";e[12].src="image/keybd/keybd_shift_active_focus.png";e[13].src="image/keybd/keybd_shift_focus.png";e[14].src="image/keybd/keybd_sign_focus.png";e[15].src="image/keybd/keybd_space_focus.png";e[16].src="image/keybd/keybd_sign_default.png";accedo.app.getCurrentController().get("loading_subcontroller").root.setStyle({display:"none"});}});};});