accedo.define("nfb.controllers.aboutSubcontroller",["accedo.utils.object","accedo.ui.controller","nfb.views.aboutSubview"],function(){return function(b){var a;return accedo.utils.object.extend(accedo.ui.controller(b),{dragDealerCurrent:0,isDragging:false,out:false,dragToLocation:function(d){var c=this;if(d!=c.dragDealerCurrent){return;}else{c.dragDealerCurrent=-1;c.isDragging=false;}},onCreate:function(L){var p=this;p.setView(nfb.views.aboutSubview);accedo.app.getCurrentController().get("loading_subcontroller").root.setStyle({display:"block"});var n=localStorage.getItem("zlang");var w=this.get("about_text");var F=this.get("english");var k=this.get("french");var s=p.get("about_scroll");var l=this.get("about_layer");l.hide();k.addEventListener("click",function(){v();});k.root.addEventListener("click",function(){v();});F.addEventListener("click",function(){I();});F.root.addEventListener("click",function(){I();});function I(){E();E();E();E();E();k.setSrc("image/circle.png");F.setSrc("image/checked_focused.png");w.setText(i+g+f+d+c+M);localStorage.setItem("zlang","en");n=localStorage.getItem("zlang");D();}function v(){E();E();E();E();E();E();F.setSrc("image/circle.png");k.setSrc("image/checked_focused.png");w.setText(x+J+u+G+m+y);localStorage.setItem("zlang","fr");n=localStorage.getItem("zlang");D();}function D(){nfb.config.lang_set(localStorage.getItem("zlang"));}K();F.onFocus=function(){K();if(n=="en"){F.setSrc("image/checked_focused.png");}else{F.setSrc("image/circle_focused.png");}};k.onFocus=function(){K();if(n=="fr"){k.setSrc("image/checked_focused.png");}else{k.setSrc("image/circle_focused.png");}};F.onBlur=function(){if(n=="en"){F.setSrc("image/checked.png");}else{F.setSrc("image/circle.png");}};k.onBlur=function(){if(n=="fr"){k.setSrc("image/checked.png");}else{k.setSrc("image/circle.png");}};var h='<font color="orange">';var e='</font><br><br><font color="white">';var i=h+"What is the NFB?"+e+"The National Film Board is Canada's public film producer and distributor.</font><br><br>";var g=h+"Which films can be viewed on my LG TV?"+e+"All the films on NFB.ca (our Online Screening Room) can be viewed on the LG TV.</font><br><br>";var f=h+"What is a channel?"+e+"A channel is a grouping of films by genre, theme or project.</font><br><br>";var d=h+"How is content selected for the New Releases channel?"+e+"The New Releases channel contains recent films that have been put online and older films that have been recently digitized.</font><br><br>";var c=h+'What does the "Favourite" feature do?'+e+'The "Favourite"feature is a way to keep track of your favourite films.</font><br><br>';var M=h+"Terms of use"+e+"By using this application, you hereby agree to the terms and conditions of NFB.ca.</font>";var x=h+"À propos de l'ONF."+e+"L'Office national du film est l'organisme public canadien de production et de distribution de films.</font><br><br>";var J=h+"Quels sont les films offerts?"+e+"Tous les films d'ONF.ca sont disponibles pour la télévision LG.</font><br><br>";var u=h+"Qu'est-ce qu'une chaîne?"+e+"Une chaîne est un regroupement de films par genre, thème ou même projet.</font><br><br>";var G=h+"Comment est choisi le contenu de la chaîne Récent?"+e+"La sélection regroupe à la fois de nouvelles productions en ligne ou les plus récentes numérisations de nos films d’archives.</font><br><br>";var m=h+"Qu'est-ce qu'un film favori?"+e+"C'est une façon de conserver vos films préférés.</font><br><br>";var y=h+"Conditions d’utilisation"+e+"En utilisant cette application, vous acceptez les termes et conditions d’utilisation d’ONF.ca.</font>";if(n=="fr"){w.setText(x+J+u+G+m+y);F.setSrc("image/circle.png");k.setSrc("image/checked.png");}else{w.setText(i+g+f+d+c+M);}var A;var t;var C;var r;s.root.addClass("handle");s.root.addEventListener("mouseover",function(){p.out=false;s.root.setStyle({background:"orange"});});s.root.addEventListener("mouseout",function(){p.out=true;if(p.isDragging==false){s.root.setStyle({background:"gray"});}});var B=this.get("about_upbtn");var H=this.get("about_downbtn");H.addEventListener("click",function(){q();});H.root.addEventListener("click",function(){q();});B.addEventListener("click",function(){E();});B.root.addEventListener("click",function(){E();});B.onFocus=function(){B.setSrc("image/upbtn_focus.png");};H.onFocus=function(){H.setSrc("image/downbtn_focus.png");};B.onBlur=function(){B.setSrc("image/upbtn.png");};H.onBlur=function(){H.setSrc("image/downbtn.png");};var z=accedo.app.getCurrentController().get("back");var j=accedo.app.getCurrentController().get("exit");var o=accedo.app.getCurrentController().get("lg_lang");o.onFocus=function(){accedo.device.manager.unregisterKey("up");accedo.device.manager.unregisterKey("down");};z.onFocus=function(){accedo.device.manager.unregisterKey("up");accedo.device.manager.unregisterKey("down");};j.onFocus=function(){accedo.device.manager.unregisterKey("up");accedo.device.manager.unregisterKey("down");};z.onBlur=function(){K();};j.onBlur=function(){K();};o.onBlur=function(){K();};function K(){accedo.device.manager.unregisterKey("up");accedo.device.manager.unregisterKey("down");accedo.device.manager.registerKey("up",function(){E();});accedo.device.manager.registerKey("down",function(){q();});}function E(){var O=A.offsetTop;if(O+140>0){O=0;}else{O+=140;}A.style.top=O+"px";var N=(A.offsetHeight-r.offsetHeight)/3;var P=t.offsetTop;if(P-N<0){P=0;}else{P-=N;}t.style.top=P+"px";}window.onmouseup=function(){if(p.out==true){p.get("about_scroll").root.setStyle({background:"gray"});}};this.addEventListener("attach",function(){r=document.getElementById("about_screen");A=document.getElementById("about_text");t=document.getElementById("about_scroll");C=r.offsetHeight/5;t.style.height=C+"px";accedo.utils.fn.defer(function(){a=new Dragdealer("about_scroll_container",{snap:false,speed:100,horizontal:false,slide:true,vertical:true,animationCallback:function(N,P){if(p.isDragging==true){s.root.setStyle({background:"orange"});}p.isDragging=true;var O=Math.round(P*310);A.style.top=-O+"px";if(P>0){l.show();}else{if(P==0){l.hide();}}p.dragDealerCurrent=O;accedo.utils.fn.delay(function(){p.dragToLocation(O);},0.1);}});});});function q(){l.show();var O=A.offsetTop;if(O-140<-310){O=-310;}else{O-=140;}A.style.top=O+"px";var N=(A.offsetHeight-r.offsetHeight)/3;var P=t.offsetTop;if(P+N>235){P=235;}else{P+=N;}t.style.top=P+"px";}F.root.addEventListener("mouseout",function(){F.blur();});k.root.addEventListener("mouseout",function(){k.blur();});B.root.addEventListener("mouseout",function(){B.blur();});H.root.addEventListener("mouseout",function(){H.blur();});accedo.app.getCurrentController().get("loading_subcontroller").root.setStyle({display:"none"});}});};});