var lgVideoPlayer={CONTAINER_NAME:"lgVideoPlayer",appendTo:null,videoURL:"",videoWidth:1280,videoHeight:720,videoTop:0,videoLeft:0,autoPlay:false,videoDownloadable:true,initialize:false,videoDebug:false,playerObj:null,playerContainer:null,curTimerStarted:false,curTimeCounterInterval:1000,onLoadCallback:function(){},onCurTimeCallback:function(){},playStateCallback:function(){},onStopCallback:function(){},generatePlayer:function(c){if(this.videoDebug){videoDebug.create();videoDebug.show();}if(this.initialize){videoDebug.pushMsg("player is initialized");return;}videoDebug.pushMsg("player start initializing");var d=false;if(c){if(typeof c.width!="undefined"){this.videoWidth=c.width;}if(typeof c.height!="undefined"){this.videoHeight=c.height;}if(typeof c.top!="undefined"){this.videoTop=c.top;}if(typeof c.left!="undefined"){this.videoLeft=c.left;}if(c.url){this.videoURL=c.url;}if(c.autoPlay){d=c.autoPlay;this.autoPlay=c.autoPlay;}if(c.parent){this.appendTo=c.parent;}if(c.onLoadCallback){this.onLoadCallback=c.onLoadCallback;}if(c.onCurTimeCallback){this.onCurTimeCallback=c.onCurTimeCallback;}if(c.onPlayStateCallback){this.onPlayStateCallback=c.onPlayStateCallback;}if(c.onStopCallback){this.onStopCallback=c.onStopCallback;}}var a=document.createElement("div");a.id=this.CONTAINER_NAME;a.style.backgroundColor="#000000";a.style.position="absolute";a.style.width=this.videoWidth+"px";a.style.height=this.videoHeight+"px";a.style.left=this.videoLeft+"px";a.style.top=this.videoTop+"px";try{var b=document.createElement("object");b.setAttribute("type","application/x-mp4");b.setAttribute("data",this.videoURL);b.setAttribute("width",this.videoWidth);b.setAttribute("height",this.videoHeight);b.setAttribute("downloadable",this.videoDownloadable);b.setAttribute("id",this.CONTAINER_NAME+"_obj");b.setAttribute("wmode","transparent");b.style.width=this.videoWidth+"px";b.style.height=this.videoHeight+"px";this.playerObject=b;a.appendChild(b);a.obj=b;}catch(f){alert("lgVideoPlayer error: \ncreate the player object: \n"+f);return;}if(this.appendTo==null){document.getElementsByTagName("body")[0].appendChild(a);}else{try{this.appendTo.appendChild(a);}catch(f){alert("lgVideoPlayer error: "+f);return;}}this.playerContainer=a;lgVideoPlayer.postGeneratePlayer();return a;},postGeneratePlayer:function(){var a=document.getElementById(lgVideoPlayer.CONTAINER_NAME+"_obj");if(typeof a!="undefined"){lgVideoPlayer.playerObject=a;if(lgVideoPlayer.videoURL!=""&&lgVideoPlayer.videoURL!=null&&lgVideoPlayer.autoPlay==true){lgVideoPlayer.playerObject.autoStart=true;}else{if(lgVideoPlayer.videoURL!=""&&lgVideoPlayer.videoURL!=null&&lgVideoPlayer.autoPlay!=true){lgVideoPlayer.playerObject.autoStart=false;}}try{lgVideoPlayer.playerObject.setWidevineDrmURL("https://wstfcps005.shibboleth.tv/widevine/cypherpc/cgi-bin/GetEMMs.cgi");}catch(b){}lgVideoPlayer.playerObject.onPlayStateChange=lgVideoPlayer.playStateChangeCallback;lgVideoPlayer.playerObject.onReadyStateChange=lgVideoPlayer.readyStateChangeCallback;lgVideoPlayer.playerObject.onBuffering=lgVideoPlayer.bufferingCallback;lgVideoPlayer.playerObject.onError=lgVideoPlayer.errorCallback;lgVideoPlayer.initialize=true;videoDebug.pushMsg("player loading finished");lgVideoPlayer.onLoadCallback();videoDebug.pushMsg("onLoadCallback finished");}else{videoDebug.pushMsg("not yet get the playerObject");setTimeout("lgVideoPlayer.postGeneratePlayer()",1000);}},destroyPlayer:function(){if(!this.initialize){return;}videoDebug.pushMsg("==== player object destory ====");videoDebug.hide();this.onLoadCallback=function(){};this.onCurTimeCallback=function(){};this.onPlayStateCallback=function(){};this.onStopCallback=function(){};this.videoURL="";lgVideoPlayer.curTimeCounterStop();this.initialize=false;this.playerContainer.removeChild(this.playerObject);if(this.appendTo==null){document.getElementsByTagName("body")[0].removeChild(this.playerContainer);}else{try{this.appendTo.removeChild(this.playerContainer);}catch(a){alert("lgVideoPlayer error: "+a);return;}}},play:function(a){if(!this.initialize){return;videoDebug.pushMsg("play() player not initialized");}if(this.videoURL==""||this.videoURL==null){videoDebug.pushMsg("no video url");return;}if(typeof a=="undefined"){a=1;}this.playerObject=document.getElementById(this.CONTAINER_NAME+"_obj");videoDebug.pushMsg("play("+a+") video URL "+this.videoURL);if(this.playerObject.playState!=3&&this.playerObject.playState!=4&&this.playerObject.playState!=6){try{this.playerObject.play(a);videoDebug.pushMsg("play("+a+") triggered");}catch(b){videoDebug.pushMsg("play("+a+") error");}}},pause:function(){if(!this.initialize){return;videoDebug.pushMsg("play(0) player not initialized");}if(this.videoURL==""||this.videoURL==null){videoDebug.pushMsg("no video url");return;}this.playerObject=document.getElementById(this.CONTAINER_NAME+"_obj");if(this.playerObject.playState!=0&&this.playerObject.playState!=2&&this.playerObject.playState!=3&&this.playerObject.playState!=4&&this.playerObject.playState!=5&&this.playerObject.playState!=6){try{this.playerObject.play(0);videoDebug.pushMsg("play(0) triggered");}catch(a){videoDebug.pushMsg("play(0) error");}}},stop:function(){if(!this.initialize){return;}if(this.videoURL==""||this.videoURL==null){videoDebug.pushMsg("no video url");return;}this.playerObject=document.getElementById(this.CONTAINER_NAME+"_obj");if(this.playerObject.playState!=0){try{this.playerObject.stop();this.curTimeCounterStop();videoDebug.pushMsg("stop()");}catch(a){videoDebug.pushMsg("error stop()");}}else{if(this.playerObject.playState==0){videoDebug.pushMsg("already stopped");}}},skip:function(d){videoDebug.pushMsg("skip("+d+")");if(!this.initialize){videoDebug.pushMsg("return");return;}if(this.videoURL==""||this.videoURL==null){videoDebug.pushMsg("no video url");return;}this.playerObject=document.getElementById(this.CONTAINER_NAME+"_obj");if(this.playerObject.playState==1||this.playerObject.playState==2){var b=lgVideoPlayer.playerObject.mediaPlayInfo();var a=b.currentPosition;var c=b.duration;if(a+d*1000>c){videoDebug.pushMsg("skip() to the end");this.playerObject.seek(c-1000);}else{if(a+d*1000<0){videoDebug.pushMsg("skip() to the beginning");this.playerObject.seek(0);}else{videoDebug.pushMsg("skip to ("+a+d*1000+")");this.playerObject.seek(a+d*1000);}}}else{videoDebug.pushMsg("skip() not work in video not playing");}videoDebug.pushMsg("skip done");},seek:function(a){videoDebug.pushMsg("seek("+a+")");if(!this.initialize){videoDebug.pushMsg("return");return;}if(this.videoURL==""||this.videoURL==null){videoDebug.pushMsg("no video url");return;}this.playerObject=document.getElementById(this.CONTAINER_NAME+"_obj");if(this.playerObject.playState==1||this.playerObject.playState==2){var c=lgVideoPlayer.playerObject.mediaPlayInfo();var b=c.currentPosition;var d=c.duration;if(a<=0){videoDebug.pushMsg("seek() exceed lower range");this.playerObject.seek(0);}else{if(a>=d){videoDebug.pushMsg("seek() exceed upper range");this.playerObject.seek(d-1000);}else{this.playerObject.seek(a);}}}else{videoDebug.pushMsg("seek() not work in video not playing");}videoDebug.pushMsg("seek done");},curTimeCounterStart:function(){if(lgVideoPlayer.playerObject.playState==0&&lgVideoPlayer.playerObject.playState==5&&lgVideoPlayer.playerObject.playState==6){videoDebug.pushMsg("not in the correct state to start timer");return;}else{if(lgVideoPlayer.curTimerStarted==true){videoDebug.pushMsg("timer already started");return;}else{videoDebug.pushMsg("curTimeCounter started");lgVideoPlayer.curTimerStarted=true;lgVideoPlayer.curTimeCounter();}}},curTimeCounterStop:function(){videoDebug.pushMsg("curTimeCounter manually stopped");lgVideoPlayer.curTimerStarted=false;},curTimeCounter:function(){if(!lgVideoPlayer.initialize){return;}if(lgVideoPlayer.curTimerStarted==false){return;}lgVideoPlayer.curTimeCallback();if(lgVideoPlayer.playerObject.playState==0&&lgVideoPlayer.playerObject.playState==5&&lgVideoPlayer.playerObject.playState==6){videoDebug.pushMsg("curTimeCounter stopped");lgVideoPlayer.curTimerStarted=false;return;}setTimeout(lgVideoPlayer.curTimeCounter,lgVideoPlayer.curTimeCounterInterval);},playStateChangeCallback:function(){lgVideoPlayer.playerObject=document.getElementById(lgVideoPlayer.CONTAINER_NAME+"_obj");var a=lgVideoPlayer.playerObject.playState;videoDebug.pushMsg("PlayState: "+a);if(a==1||a==2||a==4){lgVideoPlayer.curTimeCounterStart();}else{if(a==0||a==5||a==6){lgVideoPlayer.curTimeCounterStop();lgVideoPlayer.onStopCallback();}}lgVideoPlayer.onPlayStateCallback(a);videoDebug.updatePlayState(a);videoDebug.updateMediaInfo(lgVideoPlayer.playerObject.mediaPlayInfo());},readyStateChangeCallback:function(){lgVideoPlayer.playerObject=document.getElementById(lgVideoPlayer.CONTAINER_NAME+"_obj");var a=lgVideoPlayer.playerObject.readyState;videoDebug.pushMsg("ReadyState: "+a);videoDebug.updateReadyState(a);videoDebug.updateMediaInfo(lgVideoPlayer.playerObject.mediaPlayInfo());},bufferingCallback:function(){lgVideoPlayer.playerObject=document.getElementById(lgVideoPlayer.CONTAINER_NAME+"_obj");var a=lgVideoPlayer.playerObject.playState;videoDebug.pushMsg("Buffering: "+a);videoDebug.updateBuffering(a);videoDebug.updateMediaInfo(lgVideoPlayer.playerObject.mediaPlayInfo());},errorCallback:function(){lgVideoPlayer.playerObject=document.getElementById(lgVideoPlayer.CONTAINER_NAME+"_obj");var a=lgVideoPlayer.playerObject.error;videoDebug.pushMsg("Error: "+a);videoDebug.updateError(a);videoDebug.updateMediaInfo(lgVideoPlayer.playerObject.mediaPlayInfo());},curTimeCallback:function(){var a=lgVideoPlayer.playerObject.mediaPlayInfo();if(typeof a.duration!="undefined"&&typeof a.currentPosition!="undefined"&&typeof a.bufRemain!="undefined"&&typeof a.bitrateInstant!="undefined"&&typeof a.bitrateTarget!="undefined"){this.onCurTimeCallback(a.currentPosition,a.duration,a.bufRemain,a.bitrateInstant,a.bitrateTarget);}videoDebug.updateMediaInfo(lgVideoPlayer.playerObject.mediaPlayInfo());},formatCurTime:function(c,d,b){c=Math.round(c/1000);d=Math.round(d/1000);if(typeof b=="undefined"||c>3600||d>3600){b=false;}var e=Math.floor(c/3600);var j=Math.floor((c%3600)/60);var k=Math.floor((c%60));var i=Math.floor(d/3600);var a=Math.floor((d%3600)/60);var g=Math.floor((d%60));if((""+j).length==1){j="0"+j;}if((""+k).length==1){k="0"+k;}if((""+a).length==1){a="0"+a;}if((""+g).length==1){g="0"+g;}var h="";if(!b){h+=e+":";}h+=j+":"+k;var f="";if(!b){f+=i+":";}f+=a+":"+g;return{current:h,duration:f};}};var videoDebug={isCreated:false,messageSlot:[],create:function(){if(this.isCreated){return;}var a=document.createElement("div");a.style.zIndex=3000;a.style.width="500px";a.style.height="500px";a.style.top="0px";a.style.left="780px";a.style.position="absolute";a.style.backgroundColor="#ffffff";a.style.color="#000000";var b=document.createElement("div");b.innerHTML="Video Debug";b.style.fontSize="28px";b.style.position="absolute";b.style.left="20px";b.style.top="20px";a.appendChild(b);this.content=document.createElement("div");this.content.innerHTML="";this.content.style.fontSize="16px";this.content.style.position="absolute";this.content.style.left="20px";this.content.style.top="60px";this.content.style.width="460px";this.content.style.height="350px";a.appendChild(this.content);this.playState=document.createElement("div");this.playState.innerHTML="PlayState: N/A";this.playState.style.fontSize="14px";this.playState.style.position="absolute";this.playState.style.left="20px";this.playState.style.top="400px";a.appendChild(this.playState);this.readyState=document.createElement("div");this.readyState.innerHTML="ReadyState: N/A";this.readyState.style.fontSize="16px";this.readyState.style.position="absolute";this.readyState.style.left="20px";this.readyState.style.top="420px";a.appendChild(this.readyState);this.buffering=document.createElement("div");this.buffering.innerHTML="buffering: N/A";this.buffering.style.fontSize="16px";this.buffering.style.position="absolute";this.buffering.style.left="20px";this.buffering.style.top="440px";a.appendChild(this.buffering);this.error=document.createElement("div");this.error.innerHTML="error: N/A";this.error.style.fontSize="16px";this.error.style.position="absolute";this.error.style.left="20px";this.error.style.top="460px";a.appendChild(this.error);this.mediaInfo=document.createElement("div");this.mediaInfo.innerHTML="MediaInfo:<br/>N/A";this.mediaInfo.style.fontSize="16px";this.mediaInfo.style.position="absolute";this.mediaInfo.style.left="270px";this.mediaInfo.style.top="360px";this.mediaInfo.style.width="200px";this.mediaInfo.style.height="100px";this.mediaInfo.style.color="#0000FF";a.appendChild(this.mediaInfo);document.getElementsByTagName("body")[0].appendChild(a);this.container=a;this.isCreated=true;},show:function(){if(!this.isCreated){return;}this.container.style.display="block";},hide:function(){if(!this.isCreated){return;}setTimeout(function(){videoDebug.container.style.display="none";},2000);},pushMsg:function(b){if(!this.isCreated){return;}this.messageSlot.push(b);while(this.messageSlot.length>15){this.messageSlot.shift();}this.content.innerHTML="";for(var a=0;a<this.messageSlot.length;a++){this.content.innerHTML+=this.messageSlot[a]+"<br/>";}},updatePlayState:function(a){if(!this.isCreated){return;}var b="";switch(a){case 0:b="stopped";break;case 1:b="playing";break;case 2:b="paused";break;case 3:b="connecting";break;case 4:b="buffering";break;case 5:b="finished";break;case 6:b="error";break;}this.playState.innerHTML="PlayState: "+a+" "+b;},updateReadyState:function(a){if(!this.isCreated){return;}this.readyState.innerHTML="ReadyState: "+a;},updateBuffering:function(a){if(!this.isCreated){return;}this.buffering.innerHTML="buffering: "+a;},updateError:function(a){if(!this.isCreated){return;}var b="";switch(a){case 0:b="A/V format not supported";break;case 1:b="Cannot connect to server or connection lost";break;case 2:b="Unidentified error";break;case 3:b="File is not found";break;case 4:b="Invalid protocol";break;case 5:b="DRM failure";break;case 6:b="Play list is empty";break;case 7:b="Unrecognized play list";break;case 8:b="Invalid ASX format";break;case 9:b="Error in downloading play list";break;case 10:b="Out of memory";break;case 11:b="Invalid URL list format";break;case 12:b="Not playable in play list";break;case 1100:b="Unidentified WM-DRM error";break;case 1101:b="Incorrect license in local license store";break;case 1102:b="Fail in receiving correct license from server";break;case 1103:b="Stored license is expired";break;}this.error.innerHTML="error: "+a+" "+b;},updateMediaInfo:function(a){if(!this.isCreated){return;}if(typeof a!="undefined"){this.mediaInfo.innerHTML="MediaInfo:<br/>";if(typeof a.duration!="undefined"){this.mediaInfo.innerHTML+="duration "+a.duration+"<br/>";}if(typeof a.currentPosition!="undefined"){this.mediaInfo.innerHTML+="currentPosition "+a.currentPosition+"<br/>";}if(typeof a.bufRemain!="undefined"){this.mediaInfo.innerHTML+="bufRemain "+a.bufRemain+"<br/>";}if(typeof a.bitrateInstant!="undefined"){this.mediaInfo.innerHTML+="bitrateInstant "+a.bitrateInstant+"<br/>";}if(typeof a.bitrateTarget!="undefined"){this.mediaInfo.innerHTML+="bitrateTarget "+a.bitrateTarget+"<br/>";}}}};var $$$=function(a){if(a.match(/</)){return document.getElementsByTagName(a.match(/<(.*)>/)[1]);}return document.getElementById(a);};